<!DOCTYPE html>
<html>
<head>
    <title>PyEAS - Elektronisches AufrufSystem</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="style.css" type="text/css"/>
    <script src="autobahn.js" type="text/javascript"></script>
    <script>

        var connection = new autobahn.Connection({
            url: 'ws://127.0.0.1:8080/ws',
            realm: 'eas'});

        connection.onopen = function(session) {
            session.call('com.eas.add_room', ['Sprechzimmer 1']).then(
                function(res) {
                },
                function(err) {
                    console.log("Error while creating room:", err.error, err.args, err.kwargs);
                }
            );

            session.call('com.eas.list_rooms').then(
                function(res) {
                    console.log("Room result:", res);
                }
            );
        };

        console.log("Opening connection");
        connection.open();

    </script>
</head>
<body>
<div id="content">
    <div id="rooms">

    </div>
</div>
</body>
</html>
